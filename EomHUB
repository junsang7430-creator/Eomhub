-- ===== 설정 =====
local BOSS_SPAWNER = workspace:WaitForChild("Spawner")
local BOSS_NAME = "[공허의 방랑자] 보이드로버"
local COOLDOWN = 9000
-- =================

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- UI 생성
local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- 메인 프레임
local frame = Instance.new("Frame", gui)
frame.Size = UDim2.fromOffset(360, 90)
frame.Position = UDim2.fromScale(0.5, 0.1) - UDim2.fromOffset(180, 0)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BackgroundTransparency = 0.3

-- 둥근 모서리
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 16)

-- 하얀 테두리
local stroke = Instance.new("UIStroke", frame)
stroke.Color = Color3.new(1,1,1)
stroke.Thickness = 2

-- 텍스트 라벨
local label = Instance.new("TextLabel", frame)
label.Size = UDim2.new(1, -50, 1, 0)
label.Position = UDim2.fromOffset(10, 0)
label.BackgroundTransparency = 1
label.TextColor3 = Color3.new(1, 1, 1)
label.TextScaled = true
label.Font = Enum.Font.GothamBold
label.TextXAlignment = Enum.TextXAlignment.Left

-- 닫기 버튼
local close = Instance.new("TextButton", frame)
close.Size = UDim2.fromOffset(36, 36)
close.Position = UDim2.new(1, -42, 0, 6)
close.Text = "X"
close.Font = Enum.Font.GothamBold
close.TextScaled = true
close.BackgroundColor3 = Color3.fromRGB(30,30,30)
close.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", close).CornerRadius = UDim.new(0, 10)

close.MouseButton1Click:Connect(function()
	frame.Visible = false
end)

-- 보스 NumberValue 접근
local boss = BOSS_SPAWNER:WaitForChild(BOSS_NAME)
local coolValue = boss:WaitForChild("Cool")

local timerRunning = false

-- 타이머 업데이트 (원래 로직 유지)
local function updateTimer()
	if timerRunning then return end
	timerRunning = true

	while true do
		local remaining = COOLDOWN - coolValue.Value
		if remaining <= 0 then
			label.Text = "월드 보스 생성됨"
			timerRunning = false
			return
		else
			local hours = math.floor(remaining / 3600)
			local minutes = math.floor((remaining % 3600) / 60)
			local seconds = math.floor(remaining % 60)
			label.Text = string.format("월드 보스 리젠까지 %02d:%02d:%02d", hours, minutes, seconds)
		end
		task.wait(1)
	end
end

updateTimer()

coolValue.Changed:Connect(function()
	if coolValue.Value >= COOLDOWN then
		label.Text = "월드 보스 생성됨"
	else
		updateTimer()
	end
end)
